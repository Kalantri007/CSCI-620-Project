{"ast":null,"code":"// API service to handle communication with the backend\n\n// API base URL\nconst API_BASE_URL = 'http://127.0.0.1:8000';\n\n// Helper function to handle API responses\nconst handleResponse = async response => {\n  const contentType = response.headers.get('content-type');\n  if (contentType && contentType.indexOf('application/json') !== -1) {\n    if (response.ok) {\n      return await response.json();\n    }\n    const error = await response.json();\n    return Promise.reject(error);\n  }\n  if (!response.ok) {\n    return Promise.reject(new Error(`HTTP error! Status: ${response.status}`));\n  }\n  return await response.text();\n};\n\n// Function to get auth token from local storage\nconst getAuthToken = () => localStorage.getItem('authToken');\n\n// Function to get auth headers\nconst getAuthHeaders = () => {\n  const token = getAuthToken();\n  return token ? {\n    'Authorization': `Token ${token}`\n  } : {};\n};\n\n// API methods\nconst api = {\n  // Authentication\n  login: async credentials => {\n    const response = await fetch(`${API_BASE_URL}/api/auth/login/`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(credentials)\n    });\n    const data = await handleResponse(response);\n\n    // Store username along with token\n    if (data.token) {\n      localStorage.setItem('authToken', data.token);\n      localStorage.setItem('username', credentials.username);\n    }\n    return data;\n  },\n  register: async userData => {\n    // Ensure password2 field is included for the backend\n    const dataToSend = {\n      ...userData,\n      password2: userData.confirmPassword || userData.password2 || userData.password\n    };\n    const response = await fetch(`${API_BASE_URL}/api/auth/register/`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(dataToSend)\n    });\n    return handleResponse(response);\n  },\n  logout: async () => {\n    const token = getAuthToken();\n    if (!token) return Promise.resolve();\n    const response = await fetch(`${API_BASE_URL}/api/auth/logout/`, {\n      method: 'POST',\n      headers: {\n        ...getAuthHeaders()\n      }\n    });\n    localStorage.removeItem('authToken');\n    localStorage.removeItem('username');\n    return handleResponse(response);\n  },\n  // User Management\n  getUsers: async () => {\n    const response = await fetch(`${API_BASE_URL}/api/auth/users/`, {\n      headers: {\n        ...getAuthHeaders()\n      }\n    });\n    return handleResponse(response);\n  },\n  getUserProfile: async () => {\n    const response = await fetch(`${API_BASE_URL}/api/auth/user/`, {\n      headers: {\n        ...getAuthHeaders()\n      }\n    });\n    return handleResponse(response);\n  },\n  // Games\n  getGames: async () => {\n    const response = await fetch(`${API_BASE_URL}/api/chess/games/`, {\n      headers: {\n        ...getAuthHeaders()\n      }\n    });\n    return handleResponse(response);\n  },\n  getGame: async gameId => {\n    const response = await fetch(`${API_BASE_URL}/api/chess/games/${gameId}/`, {\n      headers: {\n        ...getAuthHeaders()\n      }\n    });\n    return handleResponse(response);\n  },\n  createGame: async gameData => {\n    const response = await fetch(`${API_BASE_URL}/api/chess/games/`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        ...getAuthHeaders()\n      },\n      body: JSON.stringify(gameData)\n    });\n    return handleResponse(response);\n  },\n  makeMove: async (gameId, move) => {\n    const response = await fetch(`${API_BASE_URL}/api/chess/moves/`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        ...getAuthHeaders()\n      },\n      body: JSON.stringify({\n        game: gameId,\n        move_notation: move.san\n      })\n    });\n    return handleResponse(response);\n  },\n  resignGame: async gameId => {\n    const response = await fetch(`${API_BASE_URL}/api/chess/resign-game/${gameId}/`, {\n      method: 'POST',\n      headers: {\n        ...getAuthHeaders()\n      }\n    });\n    return handleResponse(response);\n  },\n  // Game Invitations\n  getInvitations: async () => {\n    const response = await fetch(`${API_BASE_URL}/api/chess/invitations/`, {\n      headers: {\n        ...getAuthHeaders()\n      }\n    });\n    return handleResponse(response);\n  },\n  createInvitation: async invitationData => {\n    const response = await fetch(`${API_BASE_URL}/api/chess/invitations/`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        ...getAuthHeaders()\n      },\n      body: JSON.stringify(invitationData)\n    });\n    return handleResponse(response);\n  },\n  acceptInvitation: async invitationId => {\n    const response = await fetch(`${API_BASE_URL}/api/chess/accept-invitation/${invitationId}/`, {\n      method: 'POST',\n      headers: {\n        ...getAuthHeaders()\n      }\n    });\n    return handleResponse(response);\n  },\n  declineInvitation: async invitationId => {\n    const response = await fetch(`${API_BASE_URL}/api/chess/decline-invitation/${invitationId}/`, {\n      method: 'POST',\n      headers: {\n        ...getAuthHeaders()\n      }\n    });\n    return handleResponse(response);\n  }\n};\nexport default api;","map":{"version":3,"names":["API_BASE_URL","handleResponse","response","contentType","headers","get","indexOf","ok","json","error","Promise","reject","Error","status","text","getAuthToken","localStorage","getItem","getAuthHeaders","token","api","login","credentials","fetch","method","body","JSON","stringify","data","setItem","username","register","userData","dataToSend","password2","confirmPassword","password","logout","resolve","removeItem","getUsers","getUserProfile","getGames","getGame","gameId","createGame","gameData","makeMove","move","game","move_notation","san","resignGame","getInvitations","createInvitation","invitationData","acceptInvitation","invitationId","declineInvitation"],"sources":["/home/vkalantri/CSCI-620-Project/chess_app/frontend/src/services/api.js"],"sourcesContent":["// API service to handle communication with the backend\n\n// API base URL\nconst API_BASE_URL = 'http://127.0.0.1:8000';\n\n// Helper function to handle API responses\nconst handleResponse = async (response) => {\n  const contentType = response.headers.get('content-type');\n  \n  if (contentType && contentType.indexOf('application/json') !== -1) {\n    if (response.ok) {\n      return await response.json();\n    }\n    \n    const error = await response.json();\n    return Promise.reject(error);\n  }\n  \n  if (!response.ok) {\n    return Promise.reject(new Error(`HTTP error! Status: ${response.status}`));\n  }\n  \n  return await response.text();\n};\n\n// Function to get auth token from local storage\nconst getAuthToken = () => localStorage.getItem('authToken');\n\n// Function to get auth headers\nconst getAuthHeaders = () => {\n  const token = getAuthToken();\n  return token ? { 'Authorization': `Token ${token}` } : {};\n};\n\n// API methods\nconst api = {\n  // Authentication\n  login: async (credentials) => {\n    const response = await fetch(`${API_BASE_URL}/api/auth/login/`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(credentials),\n    });\n    \n    const data = await handleResponse(response);\n    \n    // Store username along with token\n    if (data.token) {\n      localStorage.setItem('authToken', data.token);\n      localStorage.setItem('username', credentials.username);\n    }\n    \n    return data;\n  },\n  \n  register: async (userData) => {\n    // Ensure password2 field is included for the backend\n    const dataToSend = {\n      ...userData,\n      password2: userData.confirmPassword || userData.password2 || userData.password\n    };\n    \n    const response = await fetch(`${API_BASE_URL}/api/auth/register/`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(dataToSend),\n    });\n    return handleResponse(response);\n  },\n  \n  logout: async () => {\n    const token = getAuthToken();\n    if (!token) return Promise.resolve();\n    \n    const response = await fetch(`${API_BASE_URL}/api/auth/logout/`, {\n      method: 'POST',\n      headers: {\n        ...getAuthHeaders()\n      },\n    });\n    localStorage.removeItem('authToken');\n    localStorage.removeItem('username');\n    return handleResponse(response);\n  },\n  \n  // User Management\n  getUsers: async () => {\n    const response = await fetch(`${API_BASE_URL}/api/auth/users/`, {\n      headers: {\n        ...getAuthHeaders()\n      },\n    });\n    return handleResponse(response);\n  },\n  \n  getUserProfile: async () => {\n    const response = await fetch(`${API_BASE_URL}/api/auth/user/`, {\n      headers: {\n        ...getAuthHeaders()\n      },\n    });\n    return handleResponse(response);\n  },\n  \n  // Games\n  getGames: async () => {\n    const response = await fetch(`${API_BASE_URL}/api/chess/games/`, {\n      headers: {\n        ...getAuthHeaders()\n      },\n    });\n    return handleResponse(response);\n  },\n  \n  getGame: async (gameId) => {\n    const response = await fetch(`${API_BASE_URL}/api/chess/games/${gameId}/`, {\n      headers: {\n        ...getAuthHeaders()\n      },\n    });\n    return handleResponse(response);\n  },\n  \n  createGame: async (gameData) => {\n    const response = await fetch(`${API_BASE_URL}/api/chess/games/`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        ...getAuthHeaders()\n      },\n      body: JSON.stringify(gameData),\n    });\n    return handleResponse(response);\n  },\n  \n  makeMove: async (gameId, move) => {\n    const response = await fetch(`${API_BASE_URL}/api/chess/moves/`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        ...getAuthHeaders()\n      },\n      body: JSON.stringify({\n        game: gameId,\n        move_notation: move.san\n      }),\n    });\n    return handleResponse(response);\n  },\n  \n  resignGame: async (gameId) => {\n    const response = await fetch(`${API_BASE_URL}/api/chess/resign-game/${gameId}/`, {\n      method: 'POST',\n      headers: {\n        ...getAuthHeaders()\n      },\n    });\n    return handleResponse(response);\n  },\n  \n  // Game Invitations\n  getInvitations: async () => {\n    const response = await fetch(`${API_BASE_URL}/api/chess/invitations/`, {\n      headers: {\n        ...getAuthHeaders()\n      },\n    });\n    return handleResponse(response);\n  },\n  \n  createInvitation: async (invitationData) => {\n    const response = await fetch(`${API_BASE_URL}/api/chess/invitations/`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        ...getAuthHeaders()\n      },\n      body: JSON.stringify(invitationData),\n    });\n    return handleResponse(response);\n  },\n  \n  acceptInvitation: async (invitationId) => {\n    const response = await fetch(`${API_BASE_URL}/api/chess/accept-invitation/${invitationId}/`, {\n      method: 'POST',\n      headers: {\n        ...getAuthHeaders()\n      },\n    });\n    return handleResponse(response);\n  },\n  \n  declineInvitation: async (invitationId) => {\n    const response = await fetch(`${API_BASE_URL}/api/chess/decline-invitation/${invitationId}/`, {\n      method: 'POST',\n      headers: {\n        ...getAuthHeaders()\n      },\n    });\n    return handleResponse(response);\n  }\n};\n\nexport default api;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}